<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="../shared/style.css" />
  </head>
  <body>
    <div id="navbar">
      <label style="cursor: pointer">
        <i class="fa-solid fa-download"></i> Export
        <button
          style="display: none"
          onclick="exportLocalStorageToJSON()"
        ></button>
      </label>
      <label style="cursor: pointer">
        <i class="fa-solid fa-upload"></i> Import
        <input
          type="file"
          id="jsonInput"
          accept=".json"
          style="display: none"
          onchange="readAndImport(this.files[0])"
        />
      </label>
    </div>
    <div id="main">
      <div id="sidebar">
        <div id="hamburger" class="hamburger hamburger--arrow js-hamburger">
          <div class="hamburger-box">
            <div class="hamburger-inner"></div>
          </div>
        </div>
        <a class="sidebar-option" href="/restaurants/calculator/">
          <h2 class="fa-solid fa-calculator"></h2>
          <h4>Calculator</h4>
        </a>
        <a class="sidebar-option" href="/restaurants/Restaurants/">
          <h2 class="fa-solid fa-utensils"></h2>
          <h4>Restaurants</h4>
        </a>
        <a class="sidebar-option active" href="/restaurants/calendar/">
          <h2 class="fa-solid fa-calendar"></h2>
          <h4>Calendar</h4>
        </a>
        <a class="sidebar-option" href="/restaurants/rides/">
          <h2 class="fa-solid fa-face-laugh-beam"></h2>
          <h4>Rides</h4>
        </a>
      </div>
      <div id="display">
        <div id="calendar-container">
          <header id="calendar-header">
            <button id="prev-month">&lt;</button>
            <h2 id="month-year"></h2>
            <button id="next-month">&gt;</button>
          </header>

          <div id="calendar-grid">
            <!-- Weekday headings -->
            <div class="weekday">Sun</div>
            <div class="weekday">Mon</div>
            <div class="weekday">Tue</div>
            <div class="weekday">Wed</div>
            <div class="weekday">Thu</div>
            <div class="weekday">Fri</div>
            <div class="weekday">Sat</div>
            <!-- Days will be dynamically injected here -->
          </div>

          <div id="day-detail" hidden>
            <h3>Plan for <span id="detail-date"></span></h3>

            <div class="meal">
              <label>Breakfast:</label>
              <div class="meal-row">
                <input
                  type="text"
                  id="detail-breakfast-location"
                  placeholder="Enter breakfast location"
                />
                <input id="detail-breakfast-time" type="time" />
              </div>
            </div>
            <div class="meal">
              <label>Lunch:</label>
              <div class="meal-row">
                <input
                  type="text"
                  id="detail-lunch-location"
                  placeholder="Enter lunch location"
                />
                <input id="detail-lunch-time" type="time" />
              </div>
            </div>
            <div class="meal">
              <label>Dinner:</label>
              <div class="meal-row">
                <input
                  type="text"
                  id="detail-dinner-location"
                  placeholder="Enter dinner location"
                />
                <input id="detail-dinner-time" type="time" />
              </div>
            </div>

            <div class="snacks">
              <label>Snacks:</label>
              <div id="detail-snack-list"></div>

              <button id="detail-add-snack">Add Snack</button>
            </div>

            <div class="planned-location">
              <label>Planned Location/Area:</label>
              <input
                type="text"
                id="detail-planned-location"
                placeholder="Enter planned location"
              />
            </div>

            <button id="detail-save">Save</button>
            <button id="detail-close">Close</button>
          </div>
        </div>
      </div>
    </div>
    <datalist id="restaurant-suggestions"></datalist>
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("/restaurants/service-worker.js")
          .then((reg) => console.log("SW registered:", reg.scope))
          .catch((err) => console.error("SW registration failed:", err));
      }
    </script>
    <script src="cal.js"></script>
    <script src="../shared/navbar.js"></script>
  </body>
</html>
